
# Problem
### LeetCode 87. Scramble String
https://leetcode.com/problems/scramble-string

# Solution
```c++
class Solution {
public:
    bool isScramble(string s1, string s2) {

        /**
         *  TC: O(N^5), where
         *      N is the string length
         *
         *  SC: O(N^4)
         *
         *   great
         *   => atgre, eatgr
         *             => tgrea
         *
         *  A scrambled version of a string can be generated by interexchanging
         *  its prefix and suffix. For example, "deabc" is derived from
         *  interexchaning "abc", the prefix, and "de", the suffix, of "abcde".
         *
         *  Given 2 strings, S and T, we can determine if T is a scrambled version
         *  of S by decompsing these 2 strings into 2 parts respectively and
         *  checking if these 2 substrings are equal:
         *
         *      S = Sp + Ss
         *      T = Tp + Ts
         *
         *      => Sp == Tp && Ss == Ts, scrambled one!
         *      => Sp == Ts && Ss == Tp, scrambled one!
         */

        unordered_map<string, unordered_map<string, bool>> memo;
        return helper(s1, s2, memo);
    }

private:
    bool helper(const string& s1, const string& s2,
                unordered_map<string, unordered_map<string, bool>>& memo) {

        if (memo.count(s1) == 1 && memo[s1].count(s2) == 1) {
            return memo[s1][s2];
        }

        int n = s1.length();

        if (s1 == s2) {
            return memo[s1][s2] = true;
        }
        if (freq(s1) != freq(s2)) {
            return memo[s1][s2] = false;
        }

        for (int i = 1 ; i < n ; ++i) {
            if (helper(s1.substr(0, i), s2.substr(0, i), memo) &&
                helper(s1.substr(i, n - i), s2.substr(i, n - i), memo) ||
                helper(s1.substr(0, i), s2.substr(n - i, i), memo) &&
                helper(s1.substr(i, n - i), s2.substr(0, n - i), memo)) {
                return memo[s1][s2] = true;
            }
        }

        return memo[s1][s2] = false;
    }

    vector<int> freq(const string& s) {
        vector<int> f(26);
        for (char ch : s) {
            ++f[ch - 'a'];
        }
        return f;
    }
};
```